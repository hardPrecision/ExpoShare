{% extends "base.html" %}

{% block extra_head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/editor.css') }}">
{% endblock %}

{% block content %}
<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ —Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è -->
<div class="layout-header">
  <div class="layout-title-group">
    <span id="layout-name-display">–ù–æ–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
    <button type="button" id="layout-name-edit-btn">‚úèÔ∏è</button>
    <input type="text" id="layout-name-input" style="display:none;" />
  </div>
  <button id="toggle-preview-btn">üëÅ –ü—Ä–µ–≤—å—é</button>
</div>
<div id="editor-layout">
  <div id="editor-sidebar">
    <!-- –®—Ä–∏—Ñ—Ç –∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª -->
    <div class="control">
      <label for="font-family">–®—Ä–∏—Ñ—Ç</label>
      <select id="font-family">
        <option value="Poppins">Poppins</option>
        <option value="Arial">Arial</option>
        <option value="Times New Roman">Times New Roman</option>
        <option value="Courier New">Courier New</option>
      </select>
    </div>
    <div class="control">
      <label for="font-size">–†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞</label>
      <select id="font-size">
        <option value="14">14px</option>
        <option value="16" selected>16px</option>
        <option value="18">18px</option>
        <option value="24">24px</option>
        <option value="32">32px</option>
      </select>
    </div>
    <div class="control">
      <label for="line-height">–ò–Ω—Ç–µ—Ä–≤–∞–ª</label>
      <select id="line-height">
        <option value="1">1</option>
        <option value="1.5" selected>1.5</option>
        <option value="2">2</option>
      </select>
    </div>
    <div class="control">
      <label for="anim-type">–ê–Ω–∏–º–∞—Ü–∏—è</label>
      <select id="anim-type">
        <option value="">–ë–µ–∑ –∞–Ω–∏–º–∞—Ü–∏–∏</option>
        <option value="fade-in">–ü–æ—è–≤–ª–µ–Ω–∏–µ</option>
        <option value="slide-in">–°–¥–≤–∏–≥</option>
      </select>
    </div>
    <div class="control">
      <label for="anim-timing">Timing-—Ñ—É–Ω–∫—Ü–∏—è</label>
      <select id="anim-timing">
        <option value="ease">ease</option>
        <option value="ease-in">ease-in</option>
        <option value="ease-out">ease-out</option>
        <option value="ease-in-out">ease-in-out</option>
      </select>
    </div>
    <div class="control">
      <label for="anim-duration">–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (—Å)</label>
      <input type="number" id="anim-duration" value="1" step="0.1" style="width:60px" />
    </div>
  </div>
  <div id="editor-container">
    <div id="editor-toolbar">
      <button type="button" data-action="undo">‚Ü∂</button>
      <button type="button" data-action="redo">‚Ü∑</button>
      <button type="button" data-action="bold"><strong>B</strong></button>
      <button type="button" data-action="italic"><em>I</em></button>
      <button type="button" data-action="heading">H</button>
      <button type="button" data-action="link">–°—Å—ã–ª–∫–∞</button>
      <button type="button" data-action="image">–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
      <button type="button" data-action="carousel">–ö–∞—Ä—É—Å–µ–ª—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</button>
      <!-- Spoiler feature removed -->
      <button type="button" data-action="export">–≠–∫—Å–ø–æ—Ä—Ç</button>
      <button type="button" data-action="import">–ò–º–ø–æ—Ä—Ç</button>
      <button type="button" data-action="preview-newtab">–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–µ–≤—å—é –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ</button>
      <input type="file" id="import-input" accept="application/json" style="display:none" />
    </div>
    <textarea id="editor-markdown" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç..."></textarea>
    <div id="editor-preview" style="display:none;"></div>  <!-- –°–∫—Ä—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
  </div>
</div>
<div class="editor-actions">
  <button id="save-markdown">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–∞–∫–µ—Ç</button>
  <a href="{{ url_for('main.dashboard') }}" id="cancel-link">–û—Ç–º–µ–Ω–∞</a>
</div>
{% endblock %}

{% block extra_js %}
<script>
  window.USER_UUID = '{{ current_user.uuid }}';
  window.VIEW_MODE = {{ view_mode|default(False)|tojson }};
  {% if layout %}
  window.EDIT_LAYOUT = {{ {'id': layout.id, 'name': layout.name, 'content': layout.content}|tojson }};
  {% else %}
  window.EDIT_LAYOUT = null;
  {% endif %}
</script>
<script src="{{ url_for('static', filename='js/editor.js') }}"></script>
{% endblock %}